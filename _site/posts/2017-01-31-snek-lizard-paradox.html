
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Kevin Li - Blog - The Snake Lizard Paradox</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
		<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML">
        </script>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-65318031-2', 'auto');
		  ga('send', 'pageview');

		</script>
    </head>
    <body>
        <div id="header">
            <h1>Kevin Li - Blog</h1>

<ul>
  <li><a href="../archive.html">Posts</a></li>
  <li><a href="../contact.html">Contact</a></li>
  <li><a href="../macro-list.html">Macro Charts</a></li>
</ul>

        </div>

        <div id="content">
            <h1>The Snake Lizard Paradox</h1>

            <h3>Probability/Haskell</h3>
<div class="info">
    Posted on January 31, 2017
    
</div>

<p>Written jointly with <a href="https://jerrington.me">Jacob Errington</a>.</p>
<h3 id="suppose-your-friend-visits-a-pet-store">Suppose your friend visits a pet store…</h3>
<p>on two separate days, and purchases a pet on each day by tossing a fair coin. Heads, she buys a snake. Tails, she buys a lizard.</p>
<p>After she’s purchased these pets, you show up at her house and see a snake on the floor. What is the probability that the other pet is a snake?</p>
<p>Intuitively, both purchases are made independently right? So you would expect that the probability that the other pet be a snake is 50%</p>
<p>However, this is incorrect. Let us enumerate the possible combinations of pets.</p>
<ul>
<li>Snake, Snake</li>
<li>Snake, Lizard</li>
<li>Lizard, Snake</li>
<li>Lizard, Lizard</li>
</ul>
<p>Notice that the last case is, in fact, impossible. In other words, your friend could not have purchased two lizards because you saw a snake on the ground. Hence, the state space is restricted to the top three cases.</p>
<p>Observe that all events occur with equal probability. Let us analyze each event to ascertain the probability that the other pet is a snake given that we have observed at least one snake.</p>
<p>In the first case, the probability that the other pet is a snake is 1, even though we have no idea whether we saw the first pet or the second pet.</p>
<p>In the second case, the probability that the other pet is a snake is 0, because we have certainly seen one snake, and if we have seen one then the other must be a lizard. This is similar for the third case.</p>
<p>Thus we have <br /><span class="math display">$$ \frac{1 + 0 + 0}{3} = \frac{1}{3} $$</span><br /> The probability that the other pet is a snake, given that we have observed a snake on the floor, is one third.</p>
<p>This is a bit surprising, but makes sense if you consider that you have no idea which pet is the one that is on the floor (i.e. is it the first or second?).</p>
<h3 id="suppose-that-if-your-friend-buys-a-snake">Suppose that, if your friend buys a snake…</h3>
<p>she names it “Mr. Slithers” with some small probability <em>p</em>. Suppose that you visit her home, a snake slithers over your feet, and your friend exclaims “that’s Mr. Slithers!” What is the probability that the other pet is a snake?</p>
<p>Now this may seem like one of those goofy physics problems where they expect you to compute the mass of the sun given that a green camel stands in the desert at night-time.</p>
<p>But there is a real solution! Really! I promise!</p>
<p>We can formulate the probability that we would like to compute as a condition probability:</p>
<p><br /><span class="math display">$$ \frac{}{} \mathrm{\Pr ( \text{Both pets are snakes} | \text{One snake is named Mr. Slithers})} $$</span><br /></p>
<p>Which is read “The probability that both pets are snakes given that at least one of them is named Mr. Slithers”.</p>
<p>Using Baye’s Theorem, we can reformulate that as:</p>
<p><br /><span class="math display">$$ \frac{\Pr (\text{One snake is named Mr. Slithers} | \text{Both pets are snakes})
    \Pr(\text{Both pets are snakes})}{\Pr(\text{One snake is named Mr. Slithers})} $$</span><br /></p>
<p>Now, we have three probabilities to compute!</p>
<p>First:</p>
<p><br /><span class="math display">$$\frac{}{} \Pr(\text{One snake is named Mr. Slithers} | \text{Both pets are snakes})$$</span><br /></p>
<p>This is the probability that at least one snake is named Mr. Slithers, given that both pets are snakes.</p>
<p>If we know that both pets are snakes, then the probability that at least one is named Mr. Slithers is simply the probability of the complement of the event that none of them are named Mr. Slithers. Because these events are independent of each other, we can simply multiply the probability that the first snake is not named Mr. Slithers with the probability that the second snake is not named Mr. Slithers. In other words:</p>
<p><br /><span class="math display">$$\begin{eqnarray}
    \Pr(\text{One snake is named Mr. Slithers} | \text{Both pets are snakes}) &amp;=&amp; \nonumber \\
    1 - (\Pr(\text{Snake 1 is not named Mr. Slithers})\Pr(\text{Snake 2 is not named Mr. Slithers}))
\end{eqnarray}$$</span><br /></p>
<p>This expression is equal to: <br /><span class="math display">$$ \frac{}{} 1 - (1 - p)^2 = 2p - p^2 $$</span><br /></p>
<p>Second:</p>
<p><br /><span class="math display">$$ \frac{}{} \Pr(\text{Both pets are snakes}) $$</span><br /></p>
<p>This is easy, since there are four possible combinations of pets, and each one occurs with equal probability. Thus, we have <br /><span class="math display">$$ \frac{1}{4} $$</span><br /></p>
<p>Third:</p>
<p><br /><span class="math display">$$ \frac{}{} \Pr(\text{One snake is named Mr. Slithers}) $$</span><br /></p>
<p>This one is trickier. We can solve this by analyzing the four cases (i.e. four events), which again occur with equal probability.</p>
<p>In the first event, where both pets are snakes, the probability that at least one of them is named Mr. Slithers is, again, the probability of the complement of the event that neither of them are named Mr. Slithers. Thus, it is</p>
<p><br /><span class="math display">$$ 1 - (1 - p)^2 = 2p - p^2 \frac{}{}$$</span><br /></p>
<p>In the second event, where pet one is a snake, and pet two is a lizard, the only way to have one snake be named Mr. Slithers is for pet one to be named Mr. Slithers. This event occurs with probability <em>p</em>. This is the same for the third event.</p>
<p>For the fourth and final event, the probability that a snake is named Mr. Slithers is 0. This is because in this event, there are no snakes.</p>
<p>Thus, we have:</p>
<p><br /><span class="math display">$$ \frac{2p - p^2 + p + p}{4} = \frac{4p - p^2}{4} $$</span><br /></p>
<p>Now we recombine our expressions! This yields:</p>
<p><br /><span class="math display">$$ \Pr(\text{Both pets are snakes} | \text{One snake is named Mr. Slithers})
= \frac{2 - p}{4 - p} $$</span><br /></p>
<p>This is surprising and interesting, because it tells us that for small <em>p</em>, the probability that the other pet is a snake (if our friend shouts “that’s Mr. Slithers!” when a snake slithers across our feet) is close to <br /><span class="math display">$$ \frac{1}{2} $$</span><br /> But for large <em>p</em>, this amount is close to <br /><span class="math display">$$\frac{1}{3} $$</span><br /> Interestingly, the probability of our friend choosing a name for her snake tells us something about the other pet.</p>
<p>This result is so surprising that we decided to simulate it (using the Haskell stochastic library!)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">import</span> <span class="dt">Data.Stochastic</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">import</span> <span class="kw">qualified</span> <span class="dt">Data.Sequence</span> <span class="kw">as</span> <span class="dt">S</span></a></code></pre></div>
<p>Imports.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">data</span> <span class="dt">Pet</span> <span class="fu">=</span> <span class="dt">Snake</span> <span class="fu">|</span> <span class="dt">Lizard</span></a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="kw">deriving</span> (<span class="dt">Eq</span>, <span class="dt">Ord</span>, <span class="dt">Show</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">data</span> <span class="dt">Name</span> <span class="fu">=</span> <span class="dt">Slithers</span> <span class="fu">|</span> <span class="dt">NotSlithers</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="kw">deriving</span> (<span class="dt">Eq</span>, <span class="dt">Ord</span>, <span class="dt">Show</span>)</a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="dt">Our</span> datatypes representing names <span class="fu">and</span></a>
<a class="sourceLine" id="cb2-8" title="8">types <span class="kw">of</span> pets<span class="fu">.</span></a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" title="1"><span class="ot">petshop ::</span> <span class="dt">Sampler</span> <span class="dt">Pet</span></a>
<a class="sourceLine" id="cb3-2" title="2">petshop <span class="fu">=</span> discrete [(<span class="dt">Snake</span>, <span class="fl">0.5</span>), (<span class="dt">Lizard</span>, <span class="fl">0.5</span>)]</a></code></pre></div>
<p>This is the probability of picking a pet when your friend is at the pet store, according to a fair coin toss.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" title="1"><span class="ot">name ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Pet</span> <span class="ot">-&gt;</span> <span class="dt">Sampler</span> <span class="dt">Name</span></a>
<a class="sourceLine" id="cb4-2" title="2">name p <span class="dt">Snake</span> <span class="fu">=</span> discrete [(<span class="dt">Slithers</span>, p), (<span class="dt">NotSlithers</span>, (<span class="dv">1</span><span class="fu">-</span>p))]</a>
<a class="sourceLine" id="cb4-3" title="3">name _ <span class="dt">Lizard</span> <span class="fu">=</span> <span class="fu">pure</span> <span class="dt">NotSlithers</span></a></code></pre></div>
<p>This is the naming function that your friend uses.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" title="1"><span class="ot">friend ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Sampler</span> <span class="dt">Pet</span></a>
<a class="sourceLine" id="cb5-2" title="2">friend p <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb5-3" title="3">    p1 <span class="ot">&lt;-</span> petshop</a>
<a class="sourceLine" id="cb5-4" title="4">    p2 <span class="ot">&lt;-</span> petshop</a>
<a class="sourceLine" id="cb5-5" title="5">    n1 <span class="ot">&lt;-</span> name p p1</a>
<a class="sourceLine" id="cb5-6" title="6">    n2 <span class="ot">&lt;-</span> name p p2</a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="kw">if</span> n1 <span class="fu">==</span> <span class="dt">Slithers</span> <span class="kw">then</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb5-8" title="8">        <span class="fu">return</span> p2</a>
<a class="sourceLine" id="cb5-9" title="9">    <span class="kw">else</span> <span class="kw">if</span> n2 <span class="fu">==</span> <span class="dt">Slithers</span> <span class="kw">then</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb5-10" title="10">        <span class="fu">return</span> p1</a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="kw">else</span> friend p</a></code></pre></div>
<p>This function represents the process that your friend executes. She picks two pets from the pet store, names each of them randomly according to the probability <em>p</em>, and depending on which pet is named Mr. Slithers, returns the species of the other pet. In the case where she doesn’t name any pet Mr. Slithers, we simply try again (since we assert that one pet is a snake and is named Mr. Slithers).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" title="1"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb6-2" title="2">main <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="kw">let</span> ps <span class="fu">=</span> [<span class="fl">0.01</span>,<span class="fl">0.02</span><span class="fu">..</span><span class="fl">0.99</span>]</a>
<a class="sourceLine" id="cb6-4" title="4">        total <span class="fu">=</span> <span class="dv">10000</span></a>
<a class="sourceLine" id="cb6-5" title="5">    results <span class="ot">&lt;-</span> <span class="fu">mapM</span> (\x <span class="ot">-&gt;</span> sampleION total (friend x)) ps</a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="kw">let</span> snakes <span class="fu">=</span> <span class="fu">fmap</span> (\x <span class="ot">-&gt;</span> </a>
<a class="sourceLine" id="cb6-7" title="7">        <span class="fu">fromIntegral</span> (<span class="fu">length</span> (S.filter (<span class="fu">==</span> <span class="dt">Snake</span>) x)) <span class="fu">/</span> <span class="fu">fromIntegral</span> total) </a>
<a class="sourceLine" id="cb6-8" title="8">        results</a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="fu">putStrLn</span> <span class="fu">$</span> <span class="fu">show</span> snakes</a></code></pre></div>
<p>We simulate this process 10,000 times, varying the value of p from small values to large values. As <strong>unexpected</strong>, for small <em>p</em> we get values close to <br /><span class="math display">$$\frac{1}{2}$$</span><br />, and for large <em>p</em> we get values close to <br /><span class="math display">$$ \frac{1}{3} $$</span><br /></p>
<p>Cool eh?</p>
<p>This is also known as the <a href="https://en.wikipedia.org/wiki/Boy_or_Girl_paradox">boy girl paradox</a>.</p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
